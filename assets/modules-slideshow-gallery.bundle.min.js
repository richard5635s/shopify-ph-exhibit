class t{constructor(i,s){this.element=i,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.touchMoveX=null,this.touchMoveY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapTimer=null,this.doubleTapWaiting=!1,this.thresholdX=0,this.thresholdY=0,this.disregardVelocityThresholdX=0,this.disregardVelocityThresholdY=0,this.swipingHorizontal=!1,this.swipingVertical=!1,this.swipingDirection=null,this.swipedHorizontal=!1,this.swipedVertical=!1,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.opts=Object.assign({},t.defaults,s),this.element.addEventListener("touchstart",this._onTouchStart,e),this.element.addEventListener("touchmove",this._onTouchMove,e),this.element.addEventListener("touchend",this._onTouchEnd,e),this.opts.mouseSupport&&!("ontouchstart"in window)&&(this.element.addEventListener("mousedown",this._onTouchStart,e),document.addEventListener("mousemove",this._onTouchMove,e),document.addEventListener("mouseup",this._onTouchEnd,e))}destroy(){var t,e;this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout(null!==(t=this.longPressTimer)&&void 0!==t?t:void 0),clearTimeout(null!==(e=this.doubleTapTimer)&&void 0!==e?e:void 0)}on(t,e){if(this.handlers[t])return this.handlers[t].push(e),{type:t,fn:e,cancel:()=>this.off(t,e)}}off(t,e){if(this.handlers[t]){const i=this.handlers[t].indexOf(e);-1!==i&&this.handlers[t].splice(i,1)}}fire(t,e){for(let i=0;i<this.handlers[t].length;i++)this.handlers[t][i](e)}onTouchStart(t){this.thresholdX=this.opts.threshold("x",this),this.thresholdY=this.opts.threshold("y",this),this.disregardVelocityThresholdX=this.opts.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.opts.disregardVelocityThreshold("y",this),this.touchStartX="mousedown"===t.type?t.screenX:t.changedTouches[0].screenX,this.touchStartY="mousedown"===t.type?t.screenY:t.changedTouches[0].screenY,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.swipingDirection=null,this.longPressTimer=setTimeout((()=>this.fire("longpress",t)),this.opts.longPressTime),this.fire("panstart",t)}onTouchMove(t){var e,i,s,o,h;if("mousemove"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;const n=("mousemove"===t.type?t.screenX:t.changedTouches[0].screenX)-(null!==(e=this.touchStartX)&&void 0!==e?e:0);this.velocityX=n-(null!==(i=this.touchMoveX)&&void 0!==i?i:0),this.touchMoveX=n;const l=("mousemove"===t.type?t.screenY:t.changedTouches[0].screenY)-(null!==(s=this.touchStartY)&&void 0!==s?s:0);this.velocityY=l-(null!==(o=this.touchMoveY)&&void 0!==o?o:0),this.touchMoveY=l;const d=Math.abs(this.touchMoveX),r=Math.abs(this.touchMoveY);this.swipingHorizontal=d>this.thresholdX,this.swipingVertical=r>this.thresholdY,this.swipingDirection=d>r?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(d,r)>this.opts.pressThreshold&&clearTimeout(null!==(h=this.longPressTimer)&&void 0!==h?h:void 0),this.fire("panmove",t)}onTouchEnd(t){var e,i,s,o,h,n,l,d;if("mouseup"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;this.touchEndX="mouseup"===t.type?t.screenX:t.changedTouches[0].screenX,this.touchEndY="mouseup"===t.type?t.screenY:t.changedTouches[0].screenY,this.fire("panend",t),clearTimeout(null!==(e=this.longPressTimer)&&void 0!==e?e:void 0);const r=this.touchEndX-(null!==(i=this.touchStartX)&&void 0!==i?i:0),c=Math.abs(r),a=this.touchEndY-(null!==(s=this.touchStartY)&&void 0!==s?s:0),u=Math.abs(a);c>this.thresholdX||u>this.thresholdY?(this.swipedHorizontal=this.opts.diagonalSwipes?Math.abs(r/a)<=this.opts.diagonalLimit:c>=u&&c>this.thresholdX,this.swipedVertical=this.opts.diagonalSwipes?Math.abs(a/r)<=this.opts.diagonalLimit:u>c&&u>this.thresholdY,this.swipedHorizontal&&(r<0?((null!==(o=this.velocityX)&&void 0!==o?o:0)<-this.opts.velocityThreshold||r<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):((null!==(h=this.velocityX)&&void 0!==h?h:0)>this.opts.velocityThreshold||r>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(a<0?((null!==(n=this.velocityY)&&void 0!==n?n:0)<-this.opts.velocityThreshold||a<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):((null!==(l=this.velocityY)&&void 0!==l?l:0)>this.opts.velocityThreshold||a>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):c<this.opts.pressThreshold&&u<this.opts.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout(null!==(d=this.doubleTapTimer)&&void 0!==d?d:void 0),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout((()=>this.doubleTapWaiting=!1),this.opts.doubleTapTime),this.fire("tap",t)))}}t.defaults={threshold:(t,e)=>Math.max(25,Math.floor(.15*("x"===t?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight))),velocityThreshold:10,disregardVelocityThreshold:(t,e)=>Math.floor(.5*("x"===t?e.element.clientWidth:e.element.clientHeight)),pressThreshold:8,diagonalSwipes:!1,diagonalLimit:Math.tan(.375*Math.PI),longPressTime:500,doubleTapTime:300,mouseSupport:!0};let e=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e={passive:!0}}}))}catch(t){}document.addEventListener("alpine:init",(()=>{Alpine.store("theme-editor",{selected_section:null,selected_block:null,init(){document.addEventListener("shopify:section:select",(t=>{this.selected_section=t.detail})),document.addEventListener("shopify:section:deselect",(()=>{this.selected=null})),document.addEventListener("shopify:block:select",(t=>{this.selected_block={target:t.target,detail:t.detail}})),document.addEventListener("shopify:block:deselect",(()=>{this.selected_block=null}))}})})),window.ThemeModule_GallerySlideshow=e=>({section_id:e,total_slides:0,current_slide:1,slides:[],theme_editor_start_index:null,mounted(){Shopify.designMode&&(this._setUpDesignModeHandlers(),this.$store["theme-editor"].selected_block&&this._setIndexFromThemeEditorEvent(this.$store["theme-editor"].selected_block.target,this.$store["theme-editor"].selected_block.detail));const e=this.$refs["slideshow-track"];this.slides=Array.prototype.slice.call(e.children),this.total_slides=this.slides.length;const i=new t(e);i.on("swiperight",(t=>{this.nextSlide()})),i.on("swipeleft",(t=>{this.prevSlide()})),this.setSlideMediaToEager(this.slides[1])},nextSlide(){this.current_slide>=this.total_slides?this.current_slide=1:this.current_slide++,this.setSlideMediaToEager(this.slides[this.current_slide])},prevSlide(){this.current_slide<=1?this.current_slide=this.total_slides:this.current_slide--},setSlideMediaToEager(t){if(void 0!==t){const e=t.querySelector(".tile-media");e&&e.setAttribute("loading","eager")}},_setIndexFromThemeEditorEvent(t,e){if(e.sectionId===this.section_id){const e=t,i=Array.from(e.closest(".slideshow-track").children).indexOf(e);this.current_slide=i+1,this.theme_editor_start_index=i}},_setUpDesignModeHandlers(){document.addEventListener("shopify:block:select",(t=>{this._setIndexFromThemeEditorEvent(t.target,t.detail)}))}});
